{"ast":null,"code":"var _jsxFileName = \"/Users/nawaf/code/Create-a-D3-Dashboard-With-React-/d3ia/src/components/MapExplorer.js\",\n    _s = $RefreshSig$();\n\nimport MapVisualizerLoader from './loaders/MapVisualizer';\nimport { Delta7Icon, PerLakhIcon } from './snippets/Icons';\nimport StatisticDropdown from './StatisticDropdown';\nimport Tooltip from './Tooltip';\nimport { MAP_META, MAP_TYPES, MAP_VIEWS, MAP_VIZS, MAP_STATISTICS, SPRING_CONFIG_NUMBERS, STATE_NAMES, STATISTIC_CONFIGS, UNKNOWN_DISTRICT_KEY } from '../constants';\nimport { formatNumber, getStatistic, retry } from '../utils/commonFunctions';\nimport { ArrowLeftIcon, DotFillIcon, PinIcon, OrganizationIcon } from '@primer/octicons-react';\nimport classnames from 'classnames';\nimport equal from 'fast-deep-equal';\nimport produce from 'immer';\nimport { memo, useCallback, useEffect, useMemo, useRef, Suspense, lazy } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useHistory } from 'react-router-dom';\nimport { animated, useSpring } from 'react-spring';\nimport { useSwipeable } from 'react-swipeable';\nimport { useSessionStorage, useWindowSize } from 'react-use';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MapVisualizer = /*#__PURE__*/lazy(_c = () => retry(() => import('./MapVisualizer')));\n_c2 = MapVisualizer;\n\nfunction MapExplorer({\n  stateCode: mapCode = 'TT',\n  data,\n  mapView = MAP_VIEWS.DISTRICTS,\n  setMapView,\n  mapStatistic,\n  setMapStatistic,\n  regionHighlighted,\n  setRegionHighlighted,\n  noRegionHighlightedDistrictData,\n  anchor,\n  setAnchor,\n  expandTable = false,\n  lastDataDate,\n  hideDistrictData = false,\n  hideDistrictTestData = true,\n  hideVaccinated = false,\n  noDistrictData = false\n}) {\n  _s();\n\n  var _statisticConfig$mapC, _statisticConfig$mapC2, _statisticConfig$mapC4, _mapExplorerRef$curre;\n\n  const {\n    t\n  } = useTranslation();\n  const mapExplorerRef = useRef();\n  const {\n    width\n  } = useWindowSize();\n  const [isPerLakh, setIsPerLakh] = useSessionStorage('isPerLakhMap', false);\n  const [delta7Mode, setDelta7Mode] = useSessionStorage('delta7ModeMap', false);\n  const mapMeta = MAP_META[mapCode];\n  const mapData = mapMeta.mapType === MAP_TYPES.COUNTRY ? data : {\n    [mapCode]: data[mapCode]\n  };\n  const statisticConfig = STATISTIC_CONFIGS[mapStatistic];\n  const isDistrictView = mapView === MAP_VIEWS.DISTRICTS && (mapMeta.mapType === MAP_TYPES.STATE || !hideDistrictData && !(hideDistrictTestData && (statisticConfig === null || statisticConfig === void 0 ? void 0 : statisticConfig.category) === 'tested'));\n  const hoveredRegion = useMemo(() => {\n    var _data$regionHighlight, _data$regionHighlight2;\n\n    const hoveredData = (regionHighlighted.districtName ? (_data$regionHighlight = data[regionHighlighted.stateCode]) === null || _data$regionHighlight === void 0 ? void 0 : (_data$regionHighlight2 = _data$regionHighlight.districts) === null || _data$regionHighlight2 === void 0 ? void 0 : _data$regionHighlight2[regionHighlighted.districtName] : data[regionHighlighted.stateCode]) || {};\n    return produce(hoveredData, draft => {\n      draft.name = regionHighlighted.districtName || STATE_NAMES[regionHighlighted.stateCode];\n    });\n  }, [data, regionHighlighted.stateCode, regionHighlighted.districtName]);\n  const handlePerLakhClick = useCallback(() => {\n    const statisticConfig = STATISTIC_CONFIGS[mapStatistic];\n\n    if ((statisticConfig === null || statisticConfig === void 0 ? void 0 : statisticConfig.nonLinear) || mapStatistic === 'population') {\n      return;\n    }\n\n    setIsPerLakh(isPerLakh => !isPerLakh);\n  }, [mapStatistic, setIsPerLakh]);\n  const handleDistrictClick = useCallback(() => {\n    const newMapView = mapView === MAP_VIEWS.DISTRICTS ? MAP_VIEWS.STATES : MAP_VIEWS.DISTRICTS;\n\n    if (newMapView === MAP_VIEWS.STATES) {\n      setRegionHighlighted({\n        stateCode: regionHighlighted.stateCode,\n        districtName: null\n      });\n    }\n\n    setMapView(newMapView);\n  }, [mapView, regionHighlighted.stateCode, setMapView, setRegionHighlighted]);\n  const history = useHistory();\n  const panelRef = useRef();\n  useEffect(() => {\n    if (history.location.hash === '#MapExplorer') {\n      panelRef.current.scrollIntoView();\n    }\n  }, [history]);\n  const trail = useMemo(() => {\n    const styles = [];\n    [0, 0, 0, 0, 0, 0, 0].map((element, index) => {\n      styles.push({\n        animationDelay: `${index * 250}ms`\n      });\n      return null;\n    });\n    return styles;\n  }, []);\n  const getMapStatistic = useCallback(data => {\n    const statisticConfig = STATISTIC_CONFIGS[mapStatistic];\n    const type = (statisticConfig === null || statisticConfig === void 0 ? void 0 : statisticConfig.showDelta) && delta7Mode || (statisticConfig === null || statisticConfig === void 0 ? void 0 : statisticConfig.onlyDelta7) ? 'delta7' : 'total';\n    return getStatistic(data, type, mapStatistic, {\n      expiredDate: lastDataDate,\n      normalizedByPopulationPer: isPerLakh && mapStatistic != 'population' ? 'lakh' : null,\n      canBeNaN: true\n    });\n  }, [mapStatistic, isPerLakh, lastDataDate, delta7Mode]);\n  let currentVal = getMapStatistic(hoveredRegion);\n\n  if (isNaN(currentVal)) {\n    currentVal = '-';\n  }\n\n  const spring = useSpring({\n    total: currentVal,\n    config: {\n      tension: 250,\n      ...SPRING_CONFIG_NUMBERS\n    }\n  });\n  const mapStatistics = useMemo(() => MAP_STATISTICS.filter(statistic => {\n    var _STATISTIC_CONFIGS$st;\n\n    return !(((_STATISTIC_CONFIGS$st = STATISTIC_CONFIGS[statistic]) === null || _STATISTIC_CONFIGS$st === void 0 ? void 0 : _STATISTIC_CONFIGS$st.category) === 'vaccinated') || !hideVaccinated;\n  }), [hideVaccinated]);\n  const handleStatisticChange = useCallback(direction => {\n    const currentIndex = mapStatistics.indexOf(mapStatistic);\n    const toIndex = (mapStatistics.length + currentIndex + direction) % mapStatistics.length;\n    setMapStatistic(mapStatistics[toIndex]);\n  }, [mapStatistic, mapStatistics, setMapStatistic]);\n  const swipeHandlers = useSwipeable({\n    onSwipedLeft: handleStatisticChange.bind(this, 1),\n    onSwipedRight: handleStatisticChange.bind(this, -1)\n  });\n  const mapViz = (statisticConfig === null || statisticConfig === void 0 ? void 0 : (_statisticConfig$mapC = statisticConfig.mapConfig) === null || _statisticConfig$mapC === void 0 ? void 0 : _statisticConfig$mapC.spike) ? MAP_VIZS.SPIKE : isPerLakh || (statisticConfig === null || statisticConfig === void 0 ? void 0 : (_statisticConfig$mapC2 = statisticConfig.mapConfig) === null || _statisticConfig$mapC2 === void 0 ? void 0 : _statisticConfig$mapC2.colorScale) || (statisticConfig === null || statisticConfig === void 0 ? void 0 : statisticConfig.nonLinear) ? MAP_VIZS.CHOROPLETH : MAP_VIZS.BUBBLE;\n  const handleDeltaClick = useCallback(() => {\n    if (statisticConfig === null || statisticConfig === void 0 ? void 0 : statisticConfig.showDelta) {\n      setDelta7Mode(delta7Mode => !delta7Mode);\n    }\n  }, [statisticConfig, setDelta7Mode]);\n  const stickied = anchor === 'mapexplorer' || expandTable && width >= 769;\n  const transformStatistic = useCallback(val => {\n    var _statisticConfig$mapC3;\n\n    return (statisticConfig === null || statisticConfig === void 0 ? void 0 : (_statisticConfig$mapC3 = statisticConfig.mapConfig) === null || _statisticConfig$mapC3 === void 0 ? void 0 : _statisticConfig$mapC3.transformFn) ? statisticConfig.mapConfig.transformFn(val) : val;\n  }, [statisticConfig]);\n  const zoneColor = (statisticConfig === null || statisticConfig === void 0 ? void 0 : (_statisticConfig$mapC4 = statisticConfig.mapConfig) === null || _statisticConfig$mapC4 === void 0 ? void 0 : _statisticConfig$mapC4.colorScale) ? statisticConfig.mapConfig.colorScale(transformStatistic(currentVal)) : '';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classnames('MapExplorer', {\n      stickied\n    }, {\n      hidden: anchor && anchor !== 'mapexplorer' && (!expandTable || width < 769)\n    }),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: classnames('anchor', 'fadeInUp', {\n        stickied\n      }),\n      style: {\n        display: width < 769 || width >= 769 && expandTable ? 'none' : ''\n      },\n      onClick: setAnchor && setAnchor.bind(this, anchor === 'mapexplorer' ? null : 'mapexplorer'),\n      children: /*#__PURE__*/_jsxDEV(PinIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"panel\",\n      ref: panelRef,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-left fadeInUp\",\n        style: trail[0],\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: classnames(mapStatistic),\n          style: {\n            color: zoneColor || (statisticConfig === null || statisticConfig === void 0 ? void 0 : statisticConfig.color)\n          },\n          children: [t(hoveredRegion.name), hoveredRegion.name === UNKNOWN_DISTRICT_KEY && ` [${t(STATE_NAMES[regionHighlighted.stateCode])}]`]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 21\n        }, this), regionHighlighted.stateCode && /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: classnames('district', mapStatistic),\n          style: {\n            color: zoneColor || (statisticConfig === null || statisticConfig === void 0 ? void 0 : statisticConfig.color)\n          },\n          children: [/*#__PURE__*/_jsxDEV(animated.div, {\n            children: spring.total.to(total => !noRegionHighlightedDistrictData || !(statisticConfig === null || statisticConfig === void 0 ? void 0 : statisticConfig.hasPrimary) ? formatNumber(total, statisticConfig.format, mapStatistic) : '-')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(StatisticDropdown, {\n            currentStatistic: mapStatistic,\n            statistics: mapStatistics,\n            mapType: mapMeta.mapType,\n            isPerLakh,\n            delta7Mode,\n            mapStatistic,\n            setMapStatistic,\n            hideDistrictTestData,\n            hideVaccinated,\n            zoneColor\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: classnames('panel-right', `is-${mapStatistic}`),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"switch-type\",\n          children: [/*#__PURE__*/_jsxDEV(Tooltip, {\n            message: 'Last 7 day values',\n            hold: true,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classnames('toggle', 'fadeInUp', {\n                'is-highlighted': delta7Mode && (statisticConfig === null || statisticConfig === void 0 ? void 0 : statisticConfig.showDelta) || (statisticConfig === null || statisticConfig === void 0 ? void 0 : statisticConfig.onlyDelta7),\n                disabled: !(statisticConfig === null || statisticConfig === void 0 ? void 0 : statisticConfig.showDelta)\n              }),\n              onClick: handleDeltaClick,\n              style: trail[1],\n              children: /*#__PURE__*/_jsxDEV(Delta7Icon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 304,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n            message: 'Per lakh people',\n            hold: true,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classnames('toggle', 'fadeInUp', {\n                'is-highlighted': !(statisticConfig === null || statisticConfig === void 0 ? void 0 : statisticConfig.nonLinear) && mapViz === MAP_VIZS.CHOROPLETH,\n                disabled: (statisticConfig === null || statisticConfig === void 0 ? void 0 : statisticConfig.nonLinear) || mapStatistic === 'population'\n              }),\n              onClick: handlePerLakhClick,\n              style: trail[2],\n              children: /*#__PURE__*/_jsxDEV(PerLakhIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 25\n          }, this), mapMeta.mapType === MAP_TYPES.COUNTRY && /*#__PURE__*/_jsxDEV(Tooltip, {\n            message: 'Toggle between states/districts',\n            hold: true,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: classnames('toggle', 'boundary fadeInUp', {\n                'is-highlighted': isDistrictView,\n                disabled: hideDistrictData || (statisticConfig === null || statisticConfig === void 0 ? void 0 : statisticConfig.category) === 'tested' && hideDistrictTestData\n              }),\n              onClick: handleDistrictClick,\n              style: trail[3],\n              children: /*#__PURE__*/_jsxDEV(OrganizationIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 337,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 29\n          }, this), mapMeta.mapType === MAP_TYPES.STATE && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"divider\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"toggle back fadeInUp\",\n              onClick: () => {\n                history.push('/#MapExplorer');\n              },\n              style: trail[4],\n              children: /*#__PURE__*/_jsxDEV(ArrowLeftIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"switch-statistic fadeInUp\",\n          style: trail[5],\n          children: mapStatistics.map(statistic => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classnames('toggle', 'statistic-option', `is-${statistic}`, {\n              'is-highlighted': mapStatistic === statistic\n            }),\n            onClick: setMapStatistic.bind(this, statistic),\n            children: /*#__PURE__*/_jsxDEV(DotFillIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 33\n            }, this)\n          }, statistic, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapExplorerRef,\n      className: \"fadeInUp\",\n      style: trail[3],\n      ...swipeHandlers,\n      children: mapStatistic && /*#__PURE__*/_jsxDEV(Suspense, {\n        fallback: /*#__PURE__*/_jsxDEV(MapVisualizerLoader, {\n          className: \"map-loader\",\n          width: (_mapExplorerRef$curre = mapExplorerRef.current) === null || _mapExplorerRef$curre === void 0 ? void 0 : _mapExplorerRef$curre.clientWidth,\n          statistic: mapStatistic\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 29\n        }, this),\n        children: /*#__PURE__*/_jsxDEV(MapVisualizer, {\n          data: mapData,\n          statistic: mapStatistic,\n          mapCode,\n          isDistrictView,\n          mapViz,\n          regionHighlighted,\n          setRegionHighlighted,\n          getMapStatistic,\n          transformStatistic,\n          noDistrictData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 225,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MapExplorer, \"OfrMRMEIo5LrOirt7rVPhs/k5qo=\", false, function () {\n  return [useTranslation, useWindowSize, useSessionStorage, useSessionStorage, useHistory, useSpring, useSwipeable];\n});\n\n_c3 = MapExplorer;\n\nconst isEqual = (prevProps, currProps) => {\n  var _prevProps$data, _prevProps$data$TT, _prevProps$data$TT$me, _currProps$data, _currProps$data$TT, _currProps$data$TT$me, _prevProps$data2, _prevProps$data2$TT, _currProps$data2, _currProps$data2$TT;\n\n  if (!equal(prevProps.stateCode, currProps.stateCode)) {\n    return false;\n  } else if (!equal(prevProps.regionHighlighted, currProps.regionHighlighted)) {\n    return false;\n  } else if (!equal(prevProps.mapView, currProps.mapView)) {\n    return false;\n  } else if (!equal(prevProps.mapStatistic, currProps.mapStatistic)) {\n    return false;\n  } else if (!equal(prevProps.anchor, currProps.anchor)) {\n    return false;\n  } else if (!equal(prevProps.expandTable, currProps.expandTable)) {\n    return false;\n  } else if (!equal(prevProps.hideDistrictData, currProps.hideDistrictData)) {\n    return false;\n  } else if (!equal(prevProps.hideDistrictTestData, currProps.hideDistrictTestData)) {\n    return false;\n  } else if (!equal(prevProps.hideVaccinated, currProps.hideVaccinated)) {\n    return false;\n  } else if (!equal(prevProps.lastDataDate, currProps.lastDataDate)) {\n    return false;\n  } else if (!equal((_prevProps$data = prevProps.data) === null || _prevProps$data === void 0 ? void 0 : (_prevProps$data$TT = _prevProps$data.TT) === null || _prevProps$data$TT === void 0 ? void 0 : (_prevProps$data$TT$me = _prevProps$data$TT.meta) === null || _prevProps$data$TT$me === void 0 ? void 0 : _prevProps$data$TT$me['last_updated'], (_currProps$data = currProps.data) === null || _currProps$data === void 0 ? void 0 : (_currProps$data$TT = _currProps$data.TT) === null || _currProps$data$TT === void 0 ? void 0 : (_currProps$data$TT$me = _currProps$data$TT.meta) === null || _currProps$data$TT$me === void 0 ? void 0 : _currProps$data$TT$me['last_updated'])) {\n    return false;\n  } else if (!equal((_prevProps$data2 = prevProps.data) === null || _prevProps$data2 === void 0 ? void 0 : (_prevProps$data2$TT = _prevProps$data2.TT) === null || _prevProps$data2$TT === void 0 ? void 0 : _prevProps$data2$TT.total, (_currProps$data2 = currProps.data) === null || _currProps$data2 === void 0 ? void 0 : (_currProps$data2$TT = _currProps$data2.TT) === null || _currProps$data2$TT === void 0 ? void 0 : _currProps$data2$TT.total)) {\n    return false;\n  } else if (!equal(prevProps.noRegionHighlightedDistrictData, currProps.noRegionHighlightedDistrictData)) {\n    return false;\n  } else if (!equal(prevProps.noDistrictData, currProps.noDistrictData)) {\n    return false;\n  }\n\n  return true;\n};\n\nexport default _c4 = /*#__PURE__*/memo(MapExplorer, isEqual);\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"MapVisualizer$lazy\");\n$RefreshReg$(_c2, \"MapVisualizer\");\n$RefreshReg$(_c3, \"MapExplorer\");\n$RefreshReg$(_c4, \"%default%\");","map":{"version":3,"sources":["/Users/nawaf/code/Create-a-D3-Dashboard-With-React-/d3ia/src/components/MapExplorer.js"],"names":["MapVisualizerLoader","Delta7Icon","PerLakhIcon","StatisticDropdown","Tooltip","MAP_META","MAP_TYPES","MAP_VIEWS","MAP_VIZS","MAP_STATISTICS","SPRING_CONFIG_NUMBERS","STATE_NAMES","STATISTIC_CONFIGS","UNKNOWN_DISTRICT_KEY","formatNumber","getStatistic","retry","ArrowLeftIcon","DotFillIcon","PinIcon","OrganizationIcon","classnames","equal","produce","memo","useCallback","useEffect","useMemo","useRef","Suspense","lazy","useTranslation","useHistory","animated","useSpring","useSwipeable","useSessionStorage","useWindowSize","MapVisualizer","MapExplorer","stateCode","mapCode","data","mapView","DISTRICTS","setMapView","mapStatistic","setMapStatistic","regionHighlighted","setRegionHighlighted","noRegionHighlightedDistrictData","anchor","setAnchor","expandTable","lastDataDate","hideDistrictData","hideDistrictTestData","hideVaccinated","noDistrictData","t","mapExplorerRef","width","isPerLakh","setIsPerLakh","delta7Mode","setDelta7Mode","mapMeta","mapData","mapType","COUNTRY","statisticConfig","isDistrictView","STATE","category","hoveredRegion","hoveredData","districtName","districts","draft","name","handlePerLakhClick","nonLinear","handleDistrictClick","newMapView","STATES","history","panelRef","location","hash","current","scrollIntoView","trail","styles","map","element","index","push","animationDelay","getMapStatistic","type","showDelta","onlyDelta7","expiredDate","normalizedByPopulationPer","canBeNaN","currentVal","isNaN","spring","total","config","tension","mapStatistics","filter","statistic","handleStatisticChange","direction","currentIndex","indexOf","toIndex","length","swipeHandlers","onSwipedLeft","bind","onSwipedRight","mapViz","mapConfig","spike","SPIKE","colorScale","CHOROPLETH","BUBBLE","handleDeltaClick","stickied","transformStatistic","val","transformFn","zoneColor","hidden","display","color","to","hasPrimary","format","disabled","clientWidth","isEqual","prevProps","currProps","TT","meta"],"mappings":"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","sourcesContent":["import MapVisualizerLoader from './loaders/MapVisualizer';\nimport {Delta7Icon, PerLakhIcon} from './snippets/Icons';\nimport StatisticDropdown from './StatisticDropdown';\nimport Tooltip from './Tooltip';\n\nimport {\n    MAP_META,\n    MAP_TYPES,\n    MAP_VIEWS,\n    MAP_VIZS,\n    MAP_STATISTICS,\n    SPRING_CONFIG_NUMBERS,\n    STATE_NAMES,\n    STATISTIC_CONFIGS,\n    UNKNOWN_DISTRICT_KEY,\n} from '../constants';\nimport {formatNumber, getStatistic, retry} from '../utils/commonFunctions';\n\nimport {\n    ArrowLeftIcon,\n    DotFillIcon,\n    PinIcon,\n    OrganizationIcon,\n} from '@primer/octicons-react';\nimport classnames from 'classnames';\nimport equal from 'fast-deep-equal';\nimport produce from 'immer';\nimport {\n    memo,\n    useCallback,\n    useEffect,\n    useMemo,\n    useRef,\n    Suspense,\n    lazy,\n} from 'react';\nimport {useTranslation} from 'react-i18next';\nimport {useHistory} from 'react-router-dom';\nimport {animated, useSpring} from 'react-spring';\nimport {useSwipeable} from 'react-swipeable';\nimport {useSessionStorage, useWindowSize} from 'react-use';\n\nconst MapVisualizer = lazy(() => retry(() => import('./MapVisualizer')));\n\nfunction MapExplorer({\n                         stateCode: mapCode = 'TT',\n                         data,\n                         mapView = MAP_VIEWS.DISTRICTS,\n                         setMapView,\n                         mapStatistic,\n                         setMapStatistic,\n                         regionHighlighted,\n                         setRegionHighlighted,\n                         noRegionHighlightedDistrictData,\n                         anchor,\n                         setAnchor,\n                         expandTable = false,\n                         lastDataDate,\n                         hideDistrictData = false,\n                         hideDistrictTestData = true,\n                         hideVaccinated = false,\n                         noDistrictData = false,\n                     }) {\n    const {t} = useTranslation();\n    const mapExplorerRef = useRef();\n    const {width} = useWindowSize();\n\n    const [isPerLakh, setIsPerLakh] = useSessionStorage('isPerLakhMap', false);\n    const [delta7Mode, setDelta7Mode] = useSessionStorage('delta7ModeMap', false);\n\n    const mapMeta = MAP_META[mapCode];\n    const mapData =\n        mapMeta.mapType === MAP_TYPES.COUNTRY ? data : {[mapCode]: data[mapCode]};\n\n    const statisticConfig = STATISTIC_CONFIGS[mapStatistic];\n\n    const isDistrictView =\n        mapView === MAP_VIEWS.DISTRICTS &&\n        (mapMeta.mapType === MAP_TYPES.STATE ||\n            (!hideDistrictData &&\n                !(hideDistrictTestData && statisticConfig?.category === 'tested')));\n\n    const hoveredRegion = useMemo(() => {\n        const hoveredData =\n            (regionHighlighted.districtName\n                ? data[regionHighlighted.stateCode]?.districts?.[\n                    regionHighlighted.districtName\n                    ]\n                : data[regionHighlighted.stateCode]) || {};\n\n        return produce(hoveredData, (draft) => {\n            draft.name =\n                regionHighlighted.districtName ||\n                STATE_NAMES[regionHighlighted.stateCode];\n        });\n    }, [data, regionHighlighted.stateCode, regionHighlighted.districtName]);\n\n    const handlePerLakhClick = useCallback(() => {\n        const statisticConfig = STATISTIC_CONFIGS[mapStatistic];\n        if (statisticConfig?.nonLinear || mapStatistic === 'population') {\n            return;\n        }\n        setIsPerLakh((isPerLakh) => !isPerLakh);\n    }, [mapStatistic, setIsPerLakh]);\n\n    const handleDistrictClick = useCallback(() => {\n        const newMapView =\n            mapView === MAP_VIEWS.DISTRICTS ? MAP_VIEWS.STATES : MAP_VIEWS.DISTRICTS;\n        if (newMapView === MAP_VIEWS.STATES) {\n            setRegionHighlighted({\n                stateCode: regionHighlighted.stateCode,\n                districtName: null,\n            });\n        }\n        setMapView(newMapView);\n    }, [mapView, regionHighlighted.stateCode, setMapView, setRegionHighlighted]);\n\n    const history = useHistory();\n    const panelRef = useRef();\n\n    useEffect(() => {\n        if (history.location.hash === '#MapExplorer') {\n            panelRef.current.scrollIntoView();\n        }\n    }, [history]);\n\n    const trail = useMemo(() => {\n        const styles = [];\n\n        [0, 0, 0, 0, 0, 0, 0].map((element, index) => {\n            styles.push({\n                animationDelay: `${index * 250}ms`,\n            });\n            return null;\n        });\n\n        return styles;\n    }, []);\n\n    const getMapStatistic = useCallback(\n        (data) => {\n            const statisticConfig = STATISTIC_CONFIGS[mapStatistic];\n\n            const type =\n                (statisticConfig?.showDelta && delta7Mode) ||\n                statisticConfig?.onlyDelta7\n                    ? 'delta7'\n                    : 'total';\n\n            return getStatistic(data, type, mapStatistic, {\n                expiredDate: lastDataDate,\n                normalizedByPopulationPer:\n                    isPerLakh && mapStatistic != 'population' ? 'lakh' : null,\n                canBeNaN: true,\n            });\n        },\n        [mapStatistic, isPerLakh, lastDataDate, delta7Mode]\n    );\n\n    let currentVal = getMapStatistic(hoveredRegion);\n    if (isNaN(currentVal)) {\n        currentVal = '-';\n    }\n\n    const spring = useSpring({\n        total: currentVal,\n        config: {tension: 250, ...SPRING_CONFIG_NUMBERS},\n    });\n\n    const mapStatistics = useMemo(\n        () =>\n            MAP_STATISTICS.filter(\n                (statistic) =>\n                    !(STATISTIC_CONFIGS[statistic]?.category === 'vaccinated') ||\n                    !hideVaccinated\n            ),\n        [hideVaccinated]\n    );\n\n    const handleStatisticChange = useCallback(\n        (direction) => {\n            const currentIndex = mapStatistics.indexOf(mapStatistic);\n            const toIndex =\n                (mapStatistics.length + currentIndex + direction) %\n                mapStatistics.length;\n            setMapStatistic(mapStatistics[toIndex]);\n        },\n        [mapStatistic, mapStatistics, setMapStatistic]\n    );\n\n    const swipeHandlers = useSwipeable({\n        onSwipedLeft: handleStatisticChange.bind(this, 1),\n        onSwipedRight: handleStatisticChange.bind(this, -1),\n    });\n\n    const mapViz = statisticConfig?.mapConfig?.spike\n        ? MAP_VIZS.SPIKE\n        : isPerLakh ||\n        statisticConfig?.mapConfig?.colorScale ||\n        statisticConfig?.nonLinear\n            ? MAP_VIZS.CHOROPLETH\n            : MAP_VIZS.BUBBLE;\n\n    const handleDeltaClick = useCallback(() => {\n        if (statisticConfig?.showDelta) {\n            setDelta7Mode((delta7Mode) => !delta7Mode);\n        }\n    }, [statisticConfig, setDelta7Mode]);\n\n    const stickied = anchor === 'mapexplorer' || (expandTable && width >= 769);\n\n    const transformStatistic = useCallback(\n        (val) =>\n            statisticConfig?.mapConfig?.transformFn\n                ? statisticConfig.mapConfig.transformFn(val)\n                : val,\n        [statisticConfig]\n    );\n\n    const zoneColor = statisticConfig?.mapConfig?.colorScale\n        ? statisticConfig.mapConfig.colorScale(transformStatistic(currentVal))\n        : '';\n\n    return (\n        <div\n            className={classnames(\n                'MapExplorer',\n                {stickied},\n                {\n                    hidden:\n                        anchor && anchor !== 'mapexplorer' && (!expandTable || width < 769),\n                }\n            )}\n        >\n            <div\n                className={classnames('anchor', 'fadeInUp', {\n                    stickied,\n                })}\n                style={{\n                    display: width < 769 || (width >= 769 && expandTable) ? 'none' : '',\n                }}\n                onClick={\n                    setAnchor &&\n                    setAnchor.bind(this, anchor === 'mapexplorer' ? null : 'mapexplorer')\n                }\n            >\n                <PinIcon />\n            </div>\n            <div className=\"panel\" ref={panelRef}>\n                <div className=\"panel-left fadeInUp\" style={trail[0]}>\n                    <h2\n                        className={classnames(mapStatistic)}\n                        style={{color: zoneColor || statisticConfig?.color}}\n                    >\n                        {t(hoveredRegion.name)}\n                        {hoveredRegion.name === UNKNOWN_DISTRICT_KEY &&\n                        ` [${t(STATE_NAMES[regionHighlighted.stateCode])}]`}\n                    </h2>\n\n                    {regionHighlighted.stateCode && (\n                        <h1\n                            className={classnames('district', mapStatistic)}\n                            style={{color: zoneColor || statisticConfig?.color}}\n                        >\n                            <animated.div>\n                                {spring.total.to((total) =>\n                                    !noRegionHighlightedDistrictData ||\n                                    !statisticConfig?.hasPrimary\n                                        ? formatNumber(total, statisticConfig.format, mapStatistic)\n                                        : '-'\n                                )}\n                            </animated.div>\n                            <StatisticDropdown\n                                currentStatistic={mapStatistic}\n                                statistics={mapStatistics}\n                                mapType={mapMeta.mapType}\n                                {...{\n                                    isPerLakh,\n                                    delta7Mode,\n                                    mapStatistic,\n                                    setMapStatistic,\n                                    hideDistrictTestData,\n                                    hideVaccinated,\n                                    zoneColor,\n                                }}\n                            />\n                        </h1>\n                    )}\n                </div>\n\n                <div className={classnames('panel-right', `is-${mapStatistic}`)}>\n                    <div className=\"switch-type\">\n                        <Tooltip message={'Last 7 day values'} hold>\n                            <div\n                                className={classnames('toggle', 'fadeInUp', {\n                                    'is-highlighted':\n                                        (delta7Mode && statisticConfig?.showDelta) ||\n                                        statisticConfig?.onlyDelta7,\n                                    disabled: !statisticConfig?.showDelta,\n                                })}\n                                onClick={handleDeltaClick}\n                                style={trail[1]}\n                            >\n                                <Delta7Icon />\n                            </div>\n                        </Tooltip>\n\n                        <Tooltip message={'Per lakh people'} hold>\n                            <div\n                                className={classnames('toggle', 'fadeInUp', {\n                                    'is-highlighted':\n                                        !statisticConfig?.nonLinear &&\n                                        mapViz === MAP_VIZS.CHOROPLETH,\n                                    disabled:\n                                        statisticConfig?.nonLinear || mapStatistic === 'population',\n                                })}\n                                onClick={handlePerLakhClick}\n                                style={trail[2]}\n                            >\n                                <PerLakhIcon />\n                            </div>\n                        </Tooltip>\n\n                        {mapMeta.mapType === MAP_TYPES.COUNTRY && (\n                            <Tooltip message={'Toggle between states/districts'} hold>\n                                <div\n                                    className={classnames('toggle', 'boundary fadeInUp', {\n                                        'is-highlighted': isDistrictView,\n                                        disabled:\n                                            hideDistrictData ||\n                                            (statisticConfig?.category === 'tested' &&\n                                                hideDistrictTestData),\n                                    })}\n                                    onClick={handleDistrictClick}\n                                    style={trail[3]}\n                                >\n                                    <OrganizationIcon />\n                                </div>\n                            </Tooltip>\n                        )}\n\n                        {mapMeta.mapType === MAP_TYPES.STATE && (\n                            <>\n                                <div className=\"divider\" />\n                                <div\n                                    className=\"toggle back fadeInUp\"\n                                    onClick={() => {\n                                        history.push('/#MapExplorer');\n                                    }}\n                                    style={trail[4]}\n                                >\n                                    <ArrowLeftIcon />\n                                </div>\n                            </>\n                        )}\n                    </div>\n\n                    <div className=\"switch-statistic fadeInUp\" style={trail[5]}>\n                        {mapStatistics.map((statistic) => (\n                            <div\n                                key={statistic}\n                                className={classnames(\n                                    'toggle',\n                                    'statistic-option',\n                                    `is-${statistic}`,\n                                    {\n                                        'is-highlighted': mapStatistic === statistic,\n                                    }\n                                )}\n                                onClick={setMapStatistic.bind(this, statistic)}\n                            >\n                                <DotFillIcon />\n                            </div>\n                        ))}\n                    </div>\n                </div>\n            </div>\n\n            <div\n                ref={mapExplorerRef}\n                className=\"fadeInUp\"\n                style={trail[3]}\n                {...swipeHandlers}\n            >\n                {mapStatistic && (\n                    <Suspense\n                        fallback={\n                            <MapVisualizerLoader\n                                className=\"map-loader\"\n                                {...{\n                                    width: mapExplorerRef.current?.clientWidth,\n                                    statistic: mapStatistic,\n                                }}\n                            />\n                        }\n                    >\n                        <MapVisualizer\n                            data={mapData}\n                            statistic={mapStatistic}\n                            {...{\n                                mapCode,\n                                isDistrictView,\n                                mapViz,\n                                regionHighlighted,\n                                setRegionHighlighted,\n                                getMapStatistic,\n                                transformStatistic,\n                                noDistrictData,\n                            }}\n                        ></MapVisualizer>\n                    </Suspense>\n                )}\n            </div>\n        </div>\n    );\n}\n\nconst isEqual = (prevProps, currProps) => {\n    if (!equal(prevProps.stateCode, currProps.stateCode)) {\n        return false;\n    } else if (!equal(prevProps.regionHighlighted, currProps.regionHighlighted)) {\n        return false;\n    } else if (!equal(prevProps.mapView, currProps.mapView)) {\n        return false;\n    } else if (!equal(prevProps.mapStatistic, currProps.mapStatistic)) {\n        return false;\n    } else if (!equal(prevProps.anchor, currProps.anchor)) {\n        return false;\n    } else if (!equal(prevProps.expandTable, currProps.expandTable)) {\n        return false;\n    } else if (!equal(prevProps.hideDistrictData, currProps.hideDistrictData)) {\n        return false;\n    } else if (\n        !equal(prevProps.hideDistrictTestData, currProps.hideDistrictTestData)\n    ) {\n        return false;\n    } else if (!equal(prevProps.hideVaccinated, currProps.hideVaccinated)) {\n        return false;\n    } else if (!equal(prevProps.lastDataDate, currProps.lastDataDate)) {\n        return false;\n    } else if (\n        !equal(\n            prevProps.data?.TT?.meta?.['last_updated'],\n            currProps.data?.TT?.meta?.['last_updated']\n        )\n    ) {\n        return false;\n    } else if (!equal(prevProps.data?.TT?.total, currProps.data?.TT?.total)) {\n        return false;\n    } else if (\n        !equal(\n            prevProps.noRegionHighlightedDistrictData,\n            currProps.noRegionHighlightedDistrictData\n        )\n    ) {\n        return false;\n    } else if (!equal(prevProps.noDistrictData, currProps.noDistrictData)) {\n        return false;\n    }\n    return true;\n};\n\nexport default memo(MapExplorer, isEqual);\n"]},"metadata":{},"sourceType":"module"}