{"code":"(this.webpackJsonpd3ia=this.webpackJsonpd3ia||[]).push([[19],{234:function(e,t,n){\"use strict\";n.r(t);var a=n(46),i=n(11),c=n(2),r={root:null,rootMargin:\"0px 0px 0px 0px\",threshold:0},s=function(e){var t=Object(c.useState)(!1),n=Object(a.a)(t,2),i=n[0],s=n[1];return Object(c.useEffect)((function(){e.current&&new IntersectionObserver((function(t,n){t.forEach((function(t){t.isIntersecting&&(s(!0),n.unobserve(e.current))}))}),r).observe(e.current)}),[e]),i},l=n(102),d=n(175),j=n(132),o=n(176),u=n(122),b=[\"data\",\"isValidating\",\"error\"];var O=function(e,t,n){for(var i=Object(c.useState)(n),r=Object(a.a)(i,2),s=r[0],O=r[1],v=arguments.length,h=new Array(v>3?v-3:0),m=3;m<v;m++)h[m-3]=arguments[m];var f=u.a.apply(void 0,[e,t,s].concat(h)),x=f.data,p=f.isValidating,g=f.error,T=Object(d.a)(f,b);return Object(o.a)((function(){O(Object(j.a)(s,(function(e){e.initialData=x})))}),[x]),Object(l.a)(Object(l.a)({},T),{},{isValidating:p,error:g,data:x})},v=n(24),h=n(94),m=n.n(h),f=n(68),x=n(57),p=n(195),g=n(155),T=n(5),y=n(193),S=n(194),k=n(233),D=n(21),C=Object(c.lazy)((function(){return Object(v.k)((function(){return Promise.all([n.e(0),n.e(2),n.e(15)]).then(n.bind(null,237))}))})),M=Object(c.lazy)((function(){return Object(v.k)((function(){return n.e(16).then(n.bind(null,197))}))})),z=Object(c.lazy)((function(){return Object(v.k)((function(){return Promise.all([n.e(0),n.e(20)]).then(n.bind(null,198))}))})),w=Object(c.lazy)((function(){return Object(v.k)((function(){return Promise.all([n.e(1),n.e(11),n.e(22)]).then(n.bind(null,199))}))})),N=Object(c.lazy)((function(){return Object(v.k)((function(){return n.e(10).then(n.bind(null,238))}))})),H=Object(c.lazy)((function(){return Object(v.k)((function(){return Promise.all([n.e(0),n.e(2),n.e(13)]).then(n.bind(null,230))}))}));t.default=function(){var e,t,n=Object(c.useState)({stateCode:\"TT\",districtName:null}),r=Object(a.a)(n,2),l=r[0],d=r[1],j=Object(y.a)(\"anchor\",null),o=Object(a.a)(j,2),u=o[0],b=o[1],h=Object(y.a)(\"expandTable\",!1),V=Object(a.a)(h,1)[0],I=Object(S.a)(\"mapStatistic\",\"active\"),F=Object(a.a)(I,2),P=F[0],R=F[1],A=Object(c.useState)(\"\"),E=Object(a.a)(A,2),J=E[0],L=E[1],U=Object(T.h)(),_=Object(y.a)(\"mapView\",i.o.DISTRICTS),q=Object(a.a)(_,2),B=q[0],G=q[1],K=\"\"!==J&&J<i.e,Q=\"\"===J||J>Object(f.a)(Object(x.a)(Object(v.j)(i.f),i.y),{representation:\"date\"}),W=O(\"\".concat(i.d,\"/timeseries.min.json\"),v.b,{revalidateOnMount:!0,refreshInterval:i.b}).data,X=O(\"\".concat(i.d,\"/data\").concat(J?\"-\".concat(J):\"\",\".min.json\"),v.b,{revalidateOnMount:!0,refreshInterval:i.b}).data,Y=Object(c.useRef)(),Z=s(Y),$=Object(k.a)().width,ee=0===Object(v.h)(null===X||void 0===X?void 0:X.TT,\"total\",\"vaccinated\"),te=Object(c.useMemo)((function(){var e,t,n,a,i,c,r,s,l=[null===X||void 0===X||null===(e=X.TT)||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.date,null===X||void 0===X||null===(n=X.TT)||void 0===n||null===(a=n.meta)||void 0===a||null===(i=a.tested)||void 0===i?void 0:i.date,null===X||void 0===X||null===(c=X.TT)||void 0===c||null===(r=c.meta)||void 0===r||null===(s=r.vaccinated)||void 0===s?void 0:s.date].filter((function(e){return e}));return l.length>0?Object(f.a)(Object(p.a)(l.map((function(e){return Object(v.j)(e)}))),{representation:\"date\"}):null}),[X]),ne=Object(c.useMemo)((function(){var e=Object.keys(X||{}).map((function(e){var t,n;return null===X||void 0===X||null===(t=X[e])||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.last_updated})).filter((function(e){return e}));return e.length>0?Object(v.d)(Object(p.a)(e.map((function(e){return Object(v.j)(e)})))):null}),[X]),ae=Object(c.useMemo)((function(){return Object.entries(X||{}).reduce((function(e,t){var n,c=Object(a.a)(t,2),r=c[0],s=c[1];return e[r]=!!((null===s||void 0===s?void 0:s.districts)&&(null===(n=s.districts)||void 0===n?void 0:n[i.z])&&i.r.every((function(e){return Object(v.h)(s,\"total\",e)===Object(v.h)(s.districts[i.z],\"total\",e)}))),e}),{})}),[X]),ie=(null===l||void 0===l?void 0:l.stateCode)&&(null===l||void 0===l?void 0:l.districtName)&&l.districtName!==i.z&&ae[l.stateCode];return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(g.a,{children:[Object(D.jsx)(\"title\",{children:\"Coronavirus Outbreak in Saudia - Saudi.org\"}),Object(D.jsx)(\"meta\",{name:\"title\",content:\"Coronavirus Outbreak in Saudia: Latest Map and Case Count\"})]}),Object(D.jsxs)(\"div\",{className:\"Home\",children:[Object(D.jsxs)(\"div\",{className:m()(\"home-left\",{expanded:V}),children:[Object(D.jsxs)(\"div\",{className:\"header\",children:[Object(D.jsx)(c.Suspense,{fallback:Object(D.jsx)(\"div\",{})}),!X&&!W&&Object(D.jsx)(\"div\",{style:{height:\"60rem\"}}),Object(D.jsxs)(D.Fragment,{children:[!W&&Object(D.jsx)(\"div\",{style:{minHeight:\"61px\"}}),W&&Object(D.jsx)(c.Suspense,{fallback:Object(D.jsx)(\"div\",{style:{minHeight:\"61px\"}}),children:Object(D.jsx)(C,{date:J,setDate:L,dates:Object.keys(null===(e=W.TT)||void 0===e?void 0:e.dates),lastUpdatedDate:ne})})]})]}),Object(D.jsxs)(\"div\",{style:{position:\"relative\",marginTop:\"1rem\"},children:[X&&Object(D.jsxs)(c.Suspense,{fallback:Object(D.jsx)(\"div\",{style:{height:\"50rem\"}}),children:[$>=769&&!V&&Object(D.jsx)(M,{mapStatistic:P,setMapStatistic:R}),Object(D.jsx)(z,{data:X.TT})]}),Object(D.jsxs)(D.Fragment,{children:[!W&&Object(D.jsx)(\"div\",{style:{height:\"123px\"}}),W&&Object(D.jsx)(c.Suspense,{fallback:Object(D.jsx)(\"div\",{style:{height:\"123px\"}}),children:Object(D.jsx)(w,{timeseries:null===(t=W.TT)||void 0===t?void 0:t.dates,date:J})})]})]})]}),Object(D.jsx)(\"div\",{className:m()(\"home-right\",{expanded:V}),ref:Y,style:{minHeight:\"4rem\"},children:(Z||U.hash)&&Object(D.jsxs)(D.Fragment,{children:[X&&Object(D.jsx)(\"div\",{className:m()(\"map-container\",{expanded:V,stickied:\"mapexplorer\"===u||V&&$>=769}),children:Object(D.jsxs)(c.Suspense,{fallback:Object(D.jsx)(\"div\",{style:{height:\"50rem\"}}),children:[Object(D.jsx)(N,{data:X.TT,stateCode:\"TT\"}),Object(D.jsx)(H,{stateCode:\"TT\",data:X,mapStatistic:P,setMapStatistic:R,mapView:B,setMapView:G,regionHighlighted:l,setRegionHighlighted:d,anchor:u,setAnchor:b,expandTable:V,lastDataDate:te,hideDistrictData:K,hideDistrictTestData:Q,hideVaccinated:ee,noRegionHighlightedDistrictData:ie})]})}),W&&Object(D.jsx)(c.Suspense,{fallback:Object(D.jsx)(\"div\",{style:{height:\"50rem\"}})})]})})]}),Z&&Object(D.jsx)(c.Suspense,{fallback:Object(D.jsx)(\"div\",{})})]})}}}]);","name":"static/js/19.356e683e.chunk.js","map":{"version":3,"sources":["static/js/19.356e683e.chunk.js"],"names":["this","push","module","__webpack_exports__","__webpack_require__","r","slicedToArray","constants","react","OPTIONS","root","rootMargin","threshold","hooks_useIsVisible","elementRef","_useState","Object","_useState2","isVisible","setIsVisible","current","IntersectionObserver","entries","observer","forEach","entry","isIntersecting","unobserve","observe","objectSpread2","objectWithoutProperties","immer_esm","useUpdateEffect","esm","_excluded","hooks_useStickySWR","key","fetcher","swrOptions","options","setOptions","_len","arguments","length","args","Array","_key","_useSWR","apply","concat","data","isValidating","error","rest","draftOptions","initialData","commonFunctions","classnames","classnames_default","n","formatISO","addDays","max","Helmet","react_router","useLocalStorage","useSessionStorage","useWindowSize","jsx_runtime","Actions","Promise","all","e","then","bind","MapSwitcher","Level","Minigraphs","StateHeader","MapExplorer","_timeseries$TT","_timeseries$TT2","stateCode","districtName","regionHighlighted","setRegionHighlighted","_useLocalStorage","_useLocalStorage2","anchor","setAnchor","_useLocalStorage3","expandTable","_useSessionStorage","_useSessionStorage2","mapStatistic","setMapStatistic","_useState3","_useState4","date","setDate","location","_useLocalStorage5","DISTRICTS","_useLocalStorage6","mapView","setMapView","hideDistrictData","hideDistrictTestData","representation","timeseries","revalidateOnMount","refreshInterval","homeRightElement","width","hideVaccinated","lastDataDate","_data$TT","_data$TT$meta","_data$TT2","_data$TT2$meta","_data$TT2$meta$tested","_data$TT3","_data$TT3$meta","_data$TT3$meta$vaccin","updatedDates","meta","tested","vaccinated","filter","map","lastUpdatedDate","keys","_data$stateCode","_data$stateCode$meta","datetime","noDistrictDataStates","reduce","res","_ref","_stateData$districts","_ref2","stateData","districts","every","statistic","noRegionHighlightedDistrictData","children","name","content","className","expanded","fallback","style","height","minHeight","dates","position","marginTop","ref","hash","stickied"],"mappings":"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"},"input":"(this[\"webpackJsonpd3ia\"] = this[\"webpackJsonpd3ia\"] || []).push([[19],{\n\n/***/ 234:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 3 modules\nvar slicedToArray = __webpack_require__(46);\n\n// EXTERNAL MODULE: ./src/constants.js\nvar constants = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(2);\n\n// CONCATENATED MODULE: ./src/hooks/useIsVisible.js\nvar OPTIONS={root:null,rootMargin:\"0px 0px 0px 0px\",threshold:0};var useIsVisible_useIsVisible=function useIsVisible(elementRef){var _useState=Object(react[\"useState\"])(false),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),isVisible=_useState2[0],setIsVisible=_useState2[1];Object(react[\"useEffect\"])(function(){if(elementRef.current){var observer=new IntersectionObserver(function(entries,observer){entries.forEach(function(entry){if(entry.isIntersecting){setIsVisible(true);observer.unobserve(elementRef.current);}});},OPTIONS);observer.observe(elementRef.current);}},[elementRef]);return isVisible;};/* harmony default export */ var hooks_useIsVisible = (useIsVisible_useIsVisible);\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\nvar objectSpread2 = __webpack_require__(102);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js + 1 modules\nvar objectWithoutProperties = __webpack_require__(175);\n\n// EXTERNAL MODULE: ./node_modules/immer/dist/immer.esm.js\nvar immer_esm = __webpack_require__(132);\n\n// EXTERNAL MODULE: ./node_modules/react-use/esm/useUpdateEffect.js + 1 modules\nvar useUpdateEffect = __webpack_require__(176);\n\n// EXTERNAL MODULE: ./node_modules/swr/esm/index.js + 9 modules\nvar esm = __webpack_require__(122);\n\n// CONCATENATED MODULE: ./src/hooks/useStickySWR.js\nvar _excluded=[\"data\",\"isValidating\",\"error\"];function useStickySWR(key,fetcher,swrOptions){var _useState=Object(react[\"useState\"])(swrOptions),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),options=_useState2[0],setOptions=_useState2[1];for(var _len=arguments.length,args=new Array(_len>3?_len-3:0),_key=3;_key<_len;_key++){args[_key-3]=arguments[_key];}var _useSWR=esm[\"a\" /* default */].apply(void 0,[key,fetcher,options].concat(args)),data=_useSWR.data,isValidating=_useSWR.isValidating,error=_useSWR.error,rest=Object(objectWithoutProperties[\"a\" /* default */])(_useSWR,_excluded);Object(useUpdateEffect[\"a\" /* default */])(function(){setOptions(Object(immer_esm[\"a\" /* default */])(options,function(draftOptions){draftOptions.initialData=data;}));},[data]);return Object(objectSpread2[\"a\" /* default */])(Object(objectSpread2[\"a\" /* default */])({},rest),{},{isValidating:isValidating,error:error,data:data});}/* harmony default export */ var hooks_useStickySWR = (useStickySWR);\n// EXTERNAL MODULE: ./src/utils/commonFunctions.js\nvar commonFunctions = __webpack_require__(24);\n\n// EXTERNAL MODULE: ./node_modules/classnames/index.js\nvar classnames = __webpack_require__(94);\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// EXTERNAL MODULE: ./node_modules/date-fns/esm/formatISO/index.js\nvar formatISO = __webpack_require__(68);\n\n// EXTERNAL MODULE: ./node_modules/date-fns/esm/addDays/index.js\nvar addDays = __webpack_require__(57);\n\n// EXTERNAL MODULE: ./node_modules/date-fns/esm/max/index.js\nvar max = __webpack_require__(195);\n\n// EXTERNAL MODULE: ./node_modules/react-helmet/es/Helmet.js\nvar Helmet = __webpack_require__(155);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./node_modules/react-use/esm/useLocalStorage.js\nvar useLocalStorage = __webpack_require__(193);\n\n// EXTERNAL MODULE: ./node_modules/react-use/esm/useSessionStorage.js\nvar useSessionStorage = __webpack_require__(194);\n\n// EXTERNAL MODULE: ./node_modules/react-use/esm/useWindowSize.js + 3 modules\nvar useWindowSize = __webpack_require__(233);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(21);\n\n// CONCATENATED MODULE: ./src/components/Home.js\nvar Actions=/*#__PURE__*/Object(react[\"lazy\"])(function(){return Object(commonFunctions[\"k\" /* retry */])(function(){return Promise.all(/* import() */[__webpack_require__.e(0), __webpack_require__.e(2), __webpack_require__.e(15)]).then(__webpack_require__.bind(null, 237));});});var MapSwitcher=/*#__PURE__*/Object(react[\"lazy\"])(function(){return Object(commonFunctions[\"k\" /* retry */])(function(){return __webpack_require__.e(/* import() */ 16).then(__webpack_require__.bind(null, 197));});});var Level=/*#__PURE__*/Object(react[\"lazy\"])(function(){return Object(commonFunctions[\"k\" /* retry */])(function(){return Promise.all(/* import() */[__webpack_require__.e(0), __webpack_require__.e(20)]).then(__webpack_require__.bind(null, 198));});});var Minigraphs=/*#__PURE__*/Object(react[\"lazy\"])(function(){return Object(commonFunctions[\"k\" /* retry */])(function(){return Promise.all(/* import() */[__webpack_require__.e(1), __webpack_require__.e(11), __webpack_require__.e(22)]).then(__webpack_require__.bind(null, 199));});});var StateHeader=/*#__PURE__*/Object(react[\"lazy\"])(function(){return Object(commonFunctions[\"k\" /* retry */])(function(){return __webpack_require__.e(/* import() */ 10).then(__webpack_require__.bind(null, 238));});});var MapExplorer=/*#__PURE__*/Object(react[\"lazy\"])(function(){return Object(commonFunctions[\"k\" /* retry */])(function(){return Promise.all(/* import() */[__webpack_require__.e(0), __webpack_require__.e(2), __webpack_require__.e(13)]).then(__webpack_require__.bind(null, 230));});});function Home(){var _timeseries$TT,_timeseries$TT2;var _useState=Object(react[\"useState\"])({stateCode:'TT',districtName:null}),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),regionHighlighted=_useState2[0],setRegionHighlighted=_useState2[1];var _useLocalStorage=Object(useLocalStorage[\"a\" /* default */])('anchor',null),_useLocalStorage2=Object(slicedToArray[\"a\" /* default */])(_useLocalStorage,2),anchor=_useLocalStorage2[0],setAnchor=_useLocalStorage2[1];var _useLocalStorage3=Object(useLocalStorage[\"a\" /* default */])('expandTable',false),_useLocalStorage4=Object(slicedToArray[\"a\" /* default */])(_useLocalStorage3,1),expandTable=_useLocalStorage4[0];var _useSessionStorage=Object(useSessionStorage[\"a\" /* default */])('mapStatistic','active'),_useSessionStorage2=Object(slicedToArray[\"a\" /* default */])(_useSessionStorage,2),mapStatistic=_useSessionStorage2[0],setMapStatistic=_useSessionStorage2[1];var _useState3=Object(react[\"useState\"])(''),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),date=_useState4[0],setDate=_useState4[1];var location=Object(react_router[\"h\" /* useLocation */])();var _useLocalStorage5=Object(useLocalStorage[\"a\" /* default */])('mapView',constants[\"o\" /* MAP_VIEWS */].DISTRICTS),_useLocalStorage6=Object(slicedToArray[\"a\" /* default */])(_useLocalStorage5,2),mapView=_useLocalStorage6[0],setMapView=_useLocalStorage6[1];var hideDistrictData=date!==''&&date<constants[\"e\" /* DISTRICT_START_DATE */];var hideDistrictTestData=date===''||date>Object(formatISO[\"a\" /* default */])(Object(addDays[\"a\" /* default */])(Object(commonFunctions[\"j\" /* parseSaudiaDate */])(constants[\"f\" /* DISTRICT_TEST_END_DATE */]),constants[\"y\" /* TESTED_EXPIRING_DAYS */]),{representation:'date'});var _useStickySWR=hooks_useStickySWR(\"\".concat(constants[\"d\" /* DATA_API_ROOT */],\"/timeseries.min.json\"),commonFunctions[\"b\" /* fetcher */],{revalidateOnMount:true,refreshInterval:constants[\"b\" /* API_REFRESH_INTERVAL */]}),timeseries=_useStickySWR.data;var _useStickySWR2=hooks_useStickySWR(\"\".concat(constants[\"d\" /* DATA_API_ROOT */],\"/data\").concat(date?\"-\".concat(date):'',\".min.json\"),commonFunctions[\"b\" /* fetcher */],{revalidateOnMount:true,refreshInterval:constants[\"b\" /* API_REFRESH_INTERVAL */]}),data=_useStickySWR2.data;var homeRightElement=Object(react[\"useRef\"])();var isVisible=hooks_useIsVisible(homeRightElement);var _useWindowSize=Object(useWindowSize[\"a\" /* default */])(),width=_useWindowSize.width;var hideVaccinated=Object(commonFunctions[\"h\" /* getStatistic */])(data===null||data===void 0?void 0:data['TT'],'total','vaccinated')===0;var lastDataDate=Object(react[\"useMemo\"])(function(){var _data$TT,_data$TT$meta,_data$TT2,_data$TT2$meta,_data$TT2$meta$tested,_data$TT3,_data$TT3$meta,_data$TT3$meta$vaccin;var updatedDates=[data===null||data===void 0?void 0:(_data$TT=data['TT'])===null||_data$TT===void 0?void 0:(_data$TT$meta=_data$TT.meta)===null||_data$TT$meta===void 0?void 0:_data$TT$meta.date,data===null||data===void 0?void 0:(_data$TT2=data['TT'])===null||_data$TT2===void 0?void 0:(_data$TT2$meta=_data$TT2.meta)===null||_data$TT2$meta===void 0?void 0:(_data$TT2$meta$tested=_data$TT2$meta.tested)===null||_data$TT2$meta$tested===void 0?void 0:_data$TT2$meta$tested.date,data===null||data===void 0?void 0:(_data$TT3=data['TT'])===null||_data$TT3===void 0?void 0:(_data$TT3$meta=_data$TT3.meta)===null||_data$TT3$meta===void 0?void 0:(_data$TT3$meta$vaccin=_data$TT3$meta.vaccinated)===null||_data$TT3$meta$vaccin===void 0?void 0:_data$TT3$meta$vaccin.date].filter(function(date){return date;});return updatedDates.length>0?Object(formatISO[\"a\" /* default */])(Object(max[\"a\" /* default */])(updatedDates.map(function(date){return Object(commonFunctions[\"j\" /* parseSaudiaDate */])(date);})),{representation:'date'}):null;},[data]);var lastUpdatedDate=Object(react[\"useMemo\"])(function(){var updatedDates=Object.keys(data||{}).map(function(stateCode){var _data$stateCode,_data$stateCode$meta;return data===null||data===void 0?void 0:(_data$stateCode=data[stateCode])===null||_data$stateCode===void 0?void 0:(_data$stateCode$meta=_data$stateCode.meta)===null||_data$stateCode$meta===void 0?void 0:_data$stateCode$meta['last_updated'];}).filter(function(datetime){return datetime;});return updatedDates.length>0?Object(commonFunctions[\"d\" /* formatDateObjSaudia */])(Object(max[\"a\" /* default */])(updatedDates.map(function(datetime){return Object(commonFunctions[\"j\" /* parseSaudiaDate */])(datetime);}))):null;},[data]);var noDistrictDataStates=Object(react[\"useMemo\"])(function(){return(// Heuristic: All cases are in Unknown\nObject.entries(data||{}).reduce(function(res,_ref){var _stateData$districts;var _ref2=Object(slicedToArray[\"a\" /* default */])(_ref,2),stateCode=_ref2[0],stateData=_ref2[1];res[stateCode]=!!((stateData===null||stateData===void 0?void 0:stateData.districts)&&((_stateData$districts=stateData.districts)===null||_stateData$districts===void 0?void 0:_stateData$districts[constants[\"z\" /* UNKNOWN_DISTRICT_KEY */]])&&constants[\"r\" /* PRIMARY_STATISTICS */].every(function(statistic){return Object(commonFunctions[\"h\" /* getStatistic */])(stateData,'total',statistic)===Object(commonFunctions[\"h\" /* getStatistic */])(stateData.districts[constants[\"z\" /* UNKNOWN_DISTRICT_KEY */]],'total',statistic);}));return res;},{}));},[data]);var noRegionHighlightedDistrictData=(regionHighlighted===null||regionHighlighted===void 0?void 0:regionHighlighted.stateCode)&&(regionHighlighted===null||regionHighlighted===void 0?void 0:regionHighlighted.districtName)&&regionHighlighted.districtName!==constants[\"z\" /* UNKNOWN_DISTRICT_KEY */]&&noDistrictDataStates[regionHighlighted.stateCode];return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Helmet[\"a\" /* Helmet */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"title\",{children:\"Coronavirus Outbreak in Saudia - Saudi.org\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"meta\",{name:\"title\",content:\"Coronavirus Outbreak in Saudia: Latest Map and Case Count\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"Home\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:classnames_default()('home-left',{expanded:expandTable}),children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"header\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react[\"Suspense\"],{fallback:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{})}),!data&&!timeseries&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{height:'60rem'}}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[!timeseries&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{minHeight:'61px'}}),timeseries&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react[\"Suspense\"],{fallback:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{minHeight:'61px'}}),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Actions,{date:date,setDate:setDate,dates:Object.keys((_timeseries$TT=timeseries['TT'])===null||_timeseries$TT===void 0?void 0:_timeseries$TT.dates),lastUpdatedDate:lastUpdatedDate})})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{style:{position:'relative',marginTop:'1rem'},children:[data&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react[\"Suspense\"],{fallback:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{height:'50rem'}}),children:[width>=769&&!expandTable&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MapSwitcher,{mapStatistic:mapStatistic,setMapStatistic:setMapStatistic}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Level,{data:data['TT']})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[!timeseries&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{height:'123px'}}),timeseries&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react[\"Suspense\"],{fallback:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{height:'123px'}}),children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Minigraphs,{timeseries:(_timeseries$TT2=timeseries['TT'])===null||_timeseries$TT2===void 0?void 0:_timeseries$TT2.dates,date:date})})]})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:classnames_default()('home-right',{expanded:expandTable}),ref:homeRightElement,style:{minHeight:'4rem'},children:(isVisible||location.hash)&&/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[data&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:classnames_default()('map-container',{expanded:expandTable,stickied:anchor==='mapexplorer'||expandTable&&width>=769}),children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react[\"Suspense\"],{fallback:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{height:'50rem'}}),children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(StateHeader,{data:data['TT'],stateCode:'TT'}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MapExplorer,{stateCode:'TT',data:data,mapStatistic:mapStatistic,setMapStatistic:setMapStatistic,mapView:mapView,setMapView:setMapView,regionHighlighted:regionHighlighted,setRegionHighlighted:setRegionHighlighted,anchor:anchor,setAnchor:setAnchor,expandTable:expandTable,lastDataDate:lastDataDate,hideDistrictData:hideDistrictData,hideDistrictTestData:hideDistrictTestData,hideVaccinated:hideVaccinated,noRegionHighlightedDistrictData:noRegionHighlightedDistrictData})]})}),timeseries&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react[\"Suspense\"],{fallback:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{style:{height:'50rem'}})})]})})]}),isVisible&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react[\"Suspense\"],{fallback:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{})})]});}/* harmony default export */ var components_Home = __webpack_exports__[\"default\"] = (Home);\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["/Users/nawaf/code/Create-a-D3-Dashboard-With-React-/src/hooks/useIsVisible.js","/Users/nawaf/code/Create-a-D3-Dashboard-With-React-/src/hooks/useStickySWR.js","/Users/nawaf/code/Create-a-D3-Dashboard-With-React-/src/components/Home.js"],"names":["OPTIONS","root","rootMargin","threshold","useIsVisible","elementRef","useState","isVisible","setIsVisible","useEffect","current","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","unobserve","observe","useStickySWR","key","fetcher","swrOptions","options","setOptions","args","useSWR","data","isValidating","error","rest","useUpdateEffect","produce","draftOptions","initialData","Actions","lazy","retry","MapSwitcher","Level","Minigraphs","StateHeader","MapExplorer","Home","stateCode","districtName","regionHighlighted","setRegionHighlighted","useLocalStorage","anchor","setAnchor","expandTable","useSessionStorage","mapStatistic","setMapStatistic","date","setDate","location","useLocation","MAP_VIEWS","DISTRICTS","mapView","setMapView","hideDistrictData","DISTRICT_START_DATE","hideDistrictTestData","formatISO","addDays","parseSaudiaDate","DISTRICT_TEST_END_DATE","TESTED_EXPIRING_DAYS","representation","DATA_API_ROOT","revalidateOnMount","refreshInterval","API_REFRESH_INTERVAL","timeseries","homeRightElement","useRef","useWindowSize","width","hideVaccinated","getStatistic","lastDataDate","useMemo","updatedDates","meta","tested","vaccinated","filter","length","max","map","lastUpdatedDate","Object","keys","datetime","formatDateObjSaudia","noDistrictDataStates","reduce","res","stateData","districts","UNKNOWN_DISTRICT_KEY","PRIMARY_STATISTICS","every","statistic","noRegionHighlightedDistrictData","classnames","expanded","height","minHeight","dates","position","marginTop","hash","stickied"],"mappings":"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","file":"x","sourcesContent":["import { useState, useEffect } from \"react\";\n\nconst OPTIONS = {\n  root: null,\n  rootMargin: \"0px 0px 0px 0px\",\n  threshold: 0,\n};\n\nconst useIsVisible = (elementRef) => {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    if (elementRef.current) {\n      const observer = new IntersectionObserver((entries, observer) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            setIsVisible(true);\n            observer.unobserve(elementRef.current);\n          }\n        });\n      }, OPTIONS);\n      observer.observe(elementRef.current);\n    }\n  }, [elementRef]);\n\n  return isVisible;\n};\n\nexport default useIsVisible;\n","import produce from \"immer\";\nimport { useState } from \"react\";\nimport { useUpdateEffect } from \"react-use\";\nimport useSWR from \"swr\";\n\nexport function useStickySWR(key, fetcher, swrOptions, ...args) {\n  const [options, setOptions] = useState(swrOptions);\n\n  const { data, isValidating, error, ...rest } = useSWR(\n    key,\n    fetcher,\n    options,\n    ...args\n  );\n\n  useUpdateEffect(() => {\n    setOptions(\n      produce(options, (draftOptions) => {\n        draftOptions.initialData = data;\n      })\n    );\n  }, [data]);\n\n  return {\n    ...rest,\n    isValidating,\n    error,\n    data,\n  };\n}\n\nexport default useStickySWR;\n","import {\n  API_REFRESH_INTERVAL,\n  DATA_API_ROOT,\n  DISTRICT_START_DATE,\n  DISTRICT_TEST_END_DATE,\n  MAP_VIEWS,\n  TESTED_EXPIRING_DAYS,\n  PRIMARY_STATISTICS,\n  UNKNOWN_DISTRICT_KEY,\n} from '../constants';\nimport useIsVisible from '../hooks/useIsVisible';\nimport useStickySWR from '../hooks/useStickySWR';\nimport {\n  getStatistic,\n  fetcher,\n  retry,\n  parseSaudiaDate,\n  formatDateObjSaudia,\n} from '../utils/commonFunctions';\n\nimport classnames from 'classnames';\nimport {addDays, formatISO, max} from 'date-fns';\nimport {useMemo, useRef, useState, lazy, Suspense} from 'react';\nimport {Helmet} from 'react-helmet';\nimport {useLocation} from 'react-router-dom';\nimport {useLocalStorage, useSessionStorage, useWindowSize} from 'react-use';\n\nconst Actions = lazy(() => retry(() => import('./Actions')));\nconst MapSwitcher = lazy(() => retry(() => import('./MapSwitcher')));\nconst Level = lazy(() => retry(() => import('./Level')));\nconst Minigraphs = lazy(() => retry(() => import('./Minigraphs')));\nconst StateHeader = lazy(() => retry(() => import('./StateHeader')));\nconst MapExplorer = lazy(() => retry(() => import('./MapExplorer')));\n\nfunction Home() {\n  const [regionHighlighted, setRegionHighlighted] = useState({\n    stateCode: 'TT',\n    districtName: null,\n  });\n  const [anchor, setAnchor] = useLocalStorage('anchor', null);\n  const [expandTable] = useLocalStorage('expandTable', false);\n\n  const [mapStatistic, setMapStatistic] = useSessionStorage(\n    'mapStatistic',\n    'active'\n  );\n\n  const [date, setDate] = useState('');\n  const location = useLocation();\n\n  const [mapView, setMapView] = useLocalStorage('mapView', MAP_VIEWS.DISTRICTS);\n\n  const hideDistrictData = date !== '' && date < DISTRICT_START_DATE;\n  const hideDistrictTestData =\n    date === '' ||\n    date >\n      formatISO(\n        addDays(parseSaudiaDate(DISTRICT_TEST_END_DATE), TESTED_EXPIRING_DAYS),\n        {representation: 'date'}\n      );\n\n  const {data: timeseries} = useStickySWR(\n    `${DATA_API_ROOT}/timeseries.min.json`,\n    fetcher,\n    {\n      revalidateOnMount: true,\n      refreshInterval: API_REFRESH_INTERVAL,\n    }\n  );\n\n  const {data} = useStickySWR(\n    `${DATA_API_ROOT}/data${date ? `-${date}` : ''}.min.json`,\n    fetcher,\n    {\n      revalidateOnMount: true,\n      refreshInterval: API_REFRESH_INTERVAL,\n    }\n  );\n\n  const homeRightElement = useRef();\n  const isVisible = useIsVisible(homeRightElement);\n  const {width} = useWindowSize();\n\n  const hideVaccinated =\n    getStatistic(data?.['TT'], 'total', 'vaccinated') === 0;\n\n  const lastDataDate = useMemo(() => {\n    const updatedDates = [\n      data?.['TT']?.meta?.date,\n      data?.['TT']?.meta?.tested?.date,\n      data?.['TT']?.meta?.vaccinated?.date,\n    ].filter((date) => date);\n    return updatedDates.length > 0\n      ? formatISO(max(updatedDates.map((date) => parseSaudiaDate(date))), {\n          representation: 'date',\n        })\n      : null;\n  }, [data]);\n\n  const lastUpdatedDate = useMemo(() => {\n    const updatedDates = Object.keys(data || {})\n      .map((stateCode) => data?.[stateCode]?.meta?.['last_updated'])\n      .filter((datetime) => datetime);\n    return updatedDates.length > 0\n      ? formatDateObjSaudia(\n          max(updatedDates.map((datetime) => parseSaudiaDate(datetime)))\n        )\n      : null;\n  }, [data]);\n\n  const noDistrictDataStates = useMemo(\n    () =>\n      // Heuristic: All cases are in Unknown\n      Object.entries(data || {}).reduce((res, [stateCode, stateData]) => {\n        res[stateCode] = !!(\n          stateData?.districts &&\n          stateData.districts?.[UNKNOWN_DISTRICT_KEY] &&\n          PRIMARY_STATISTICS.every(\n            (statistic) =>\n              getStatistic(stateData, 'total', statistic) ===\n              getStatistic(\n                stateData.districts[UNKNOWN_DISTRICT_KEY],\n                'total',\n                statistic\n              )\n          )\n        );\n        return res;\n      }, {}),\n    [data]\n  );\n\n  const noRegionHighlightedDistrictData =\n    regionHighlighted?.stateCode &&\n    regionHighlighted?.districtName &&\n    regionHighlighted.districtName !== UNKNOWN_DISTRICT_KEY &&\n    noDistrictDataStates[regionHighlighted.stateCode];\n\n  return (\n    <>\n      <Helmet>\n        <title>Coronavirus Outbreak in Saudia - Saudi.org</title>\n        <meta\n          name=\"title\"\n          content=\"Coronavirus Outbreak in Saudia: Latest Map and Case Count\"\n        />\n      </Helmet>\n\n      <div className=\"Home\">\n        <div className={classnames('home-left', {expanded: expandTable})}>\n          <div className=\"header\">\n            <Suspense fallback={<div />}></Suspense>\n\n            {!data && !timeseries && <div style={{height: '60rem'}} />}\n\n            <>\n              {!timeseries && <div style={{minHeight: '61px'}} />}\n              {timeseries && (\n                <Suspense fallback={<div style={{minHeight: '61px'}} />}>\n                  <Actions\n                    {...{\n                      date,\n                      setDate,\n                      dates: Object.keys(timeseries['TT']?.dates),\n                      lastUpdatedDate,\n                    }}\n                  />\n                </Suspense>\n              )}\n            </>\n          </div>\n\n          <div style={{position: 'relative', marginTop: '1rem'}}>\n            {data && (\n              <Suspense fallback={<div style={{height: '50rem'}} />}>\n                {width >= 769 && !expandTable && (\n                  <MapSwitcher {...{mapStatistic, setMapStatistic}} />\n                )}\n                <Level data={data['TT']} />\n              </Suspense>\n            )}\n\n            <>\n              {!timeseries && <div style={{height: '123px'}} />}\n              {timeseries && (\n                <Suspense fallback={<div style={{height: '123px'}} />}>\n                  <Minigraphs\n                    timeseries={timeseries['TT']?.dates}\n                    {...{date}}\n                  />\n                </Suspense>\n              )}\n            </>\n          </div>\n        </div>\n\n        <div\n          className={classnames('home-right', {expanded: expandTable})}\n          ref={homeRightElement}\n          style={{minHeight: '4rem'}}\n        >\n          {(isVisible || location.hash) && (\n            <>\n              {data && (\n                <div\n                  className={classnames('map-container', {\n                    expanded: expandTable,\n                    stickied:\n                      anchor === 'mapexplorer' || (expandTable && width >= 769),\n                  })}\n                >\n                  <Suspense fallback={<div style={{height: '50rem'}} />}>\n                    <StateHeader data={data['TT']} stateCode={'TT'} />\n                    <MapExplorer\n                      {...{\n                        stateCode: 'TT',\n                        data,\n                        mapStatistic,\n                        setMapStatistic,\n                        mapView,\n                        setMapView,\n                        regionHighlighted,\n                        setRegionHighlighted,\n                        anchor,\n                        setAnchor,\n                        expandTable,\n                        lastDataDate,\n                        hideDistrictData,\n                        hideDistrictTestData,\n                        hideVaccinated,\n                        noRegionHighlightedDistrictData,\n                      }}\n                    />\n                  </Suspense>\n                </div>\n              )}\n\n              {timeseries && (\n                <Suspense\n                  fallback={<div style={{height: '50rem'}} />}\n                ></Suspense>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n\n      {isVisible && <Suspense fallback={<div />}></Suspense>}\n    </>\n  );\n}\n\nexport default Home;\n"]}}